<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration ‚Äî OpenFleet Docs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../css/main.css" />
  <link rel="stylesheet" href="../css/docs.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>‚ö°</text></svg>" />
</head>
<body>

  <div class="docs-sidebar-backdrop"></div>
  <button class="docs-sidebar-toggle" aria-label="Toggle sidebar">‚ò∞</button>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <a href="../" class="sidebar-brand">
        <div class="sidebar-brand__icon">‚ö°</div>
        OpenFleet
      </a>
      <span class="sidebar-version">v0.26.2</span>
      <div class="docs-search">
        <span class="docs-search__icon">üîç</span>
        <input class="docs-search__input" type="text" placeholder="Search docs..." />
      </div>
      <div class="sidebar-section">
        <div class="sidebar-section__title">Getting Started</div>
        <ul class="sidebar-nav">
          <li><a href="./"><span class="nav-icon">üìñ</span> Overview</a></li>
          <li><a href="getting-started.html"><span class="nav-icon">üöÄ</span> Quick Start</a></li>
          <li><a href="configuration.html" class="active"><span class="nav-icon">‚öôÔ∏è</span> Configuration</a></li>
        </ul>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-section__title">Reference</div>
        <ul class="sidebar-nav">
          <li><a href="cli-reference.html"><span class="nav-icon">üíª</span> CLI Reference</a></li>
          <li><a href="architecture.html"><span class="nav-icon">üèóÔ∏è</span> Architecture</a></li>
          <li><a href="integrations.html"><span class="nav-icon">üîó</span> Integrations</a></li>
        </ul>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-section__title">Links</div>
        <ul class="sidebar-nav">
          <li><a href="https://github.com/virtengine/virtengine/tree/main/scripts/openfleet" target="_blank"><span class="nav-icon">üêô</span> GitHub</a></li>
          <li><a href="https://www.npmjs.com/package/@virtengine/openfleet" target="_blank"><span class="nav-icon">üì¶</span> npm</a></li>
          <li><a href="../"><span class="nav-icon">üè†</span> Home</a></li>
        </ul>
      </div>
    </aside>

    <main class="docs-content">
      <h1>Configuration</h1>

      <p>
        OpenFleet uses a layered configuration model with multiple sources.
        Higher-priority sources override lower ones.
      </p>

      <h2 id="load-order">Load Order (Highest Priority First)</h2>

      <ol>
        <li><strong>CLI flags</strong> ‚Äî <code>--arg value</code></li>
        <li><strong>Environment variables</strong> ‚Äî <code>export VAR=value</code></li>
        <li><strong><code>.env</code> file</strong> ‚Äî dotenv format in your project root</li>
        <li><strong><code>openfleet.config.json</code></strong> ‚Äî structured JSON config</li>
        <li><strong>Built-in defaults</strong> ‚Äî sensible zero-config values</li>
      </ol>

      <h2 id="config-files">Configuration Files</h2>

      <h3><code>.env</code> ‚Äî Environment Settings</h3>
      <p>
        The primary configuration file. Generated by <code>openfleet --setup</code> with inline documentation.
        All variables are optional unless marked <strong>[REQUIRED]</strong>.
      </p>

      <div class="callout callout--tip">
        <span class="callout__icon">üí°</span>
        <p>Boolean flags accept <code>true</code>/<code>false</code> (preferred). Legacy <code>1</code>/<code>0</code> is still supported.</p>
      </div>

      <h3><code>openfleet.config.json</code> ‚Äî Structured Config</h3>
      <p>For complex executor routing, failover, and multi-repo setups:</p>

      <pre><code>{
  "$schema": "./openfleet.schema.json",
  "projectName": "my-project",
  "executors": [
    {
      "name": "copilot-claude",
      "executor": "COPILOT",
      "variant": "CLAUDE_OPUS_4_6",
      "weight": 50,
      "role": "primary",
      "enabled": true
    },
    {
      "name": "codex-default",
      "executor": "CODEX",
      "variant": "DEFAULT",
      "weight": 50,
      "role": "backup",
      "enabled": true
    }
  ],
  "failover": {
    "strategy": "next-in-line",
    "maxRetries": 3,
    "cooldownMinutes": 5,
    "disableOnConsecutiveFailures": 3
  },
  "distribution": "weighted"
}</code></pre>

      <h2 id="project-identity">Project Identity</h2>

      <table>
        <thead>
          <tr><th>Variable</th><th>Default</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>PROJECT_NAME</code></td><td>auto-detected</td><td>Project name shown in logs and Telegram</td></tr>
          <tr><td><code>GITHUB_REPO</code></td><td>auto-detected</td><td>GitHub repo in <code>owner/repo</code> format</td></tr>
        </tbody>
      </table>

      <h2 id="executor-config">Executor Configuration</h2>

      <table>
        <thead>
          <tr><th>Variable</th><th>Default</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>EXECUTORS</code></td><td>‚Äî</td><td>Shorthand: <code>COPILOT:CLAUDE_OPUS_4_6:50,CODEX:DEFAULT:50</code></td></tr>
          <tr><td><code>EXECUTOR_MODE</code></td><td><code>internal</code></td><td><code>internal</code>, <code>vk</code>, or <code>hybrid</code></td></tr>
          <tr><td><code>MAX_PARALLEL</code></td><td><code>6</code></td><td>Max concurrent agent executions</td></tr>
          <tr><td><code>PRIMARY_AGENT</code></td><td>auto</td><td>Override primary: <code>codex</code>, <code>copilot</code>, or <code>claude</code></td></tr>
        </tbody>
      </table>

      <h3>Executor Shorthand Syntax</h3>
      <pre><code>EXECUTORS=ENGINE:VARIANT:WEIGHT,ENGINE:VARIANT:WEIGHT

# Examples:
EXECUTORS=COPILOT:CLAUDE_OPUS_4_6:50,CODEX:DEFAULT:50
EXECUTORS=CODEX:DEFAULT:100
EXECUTORS=COPILOT:GPT_4_1:30,COPILOT:CLAUDE_OPUS_4_6:40,CODEX:DEFAULT:30</code></pre>

      <h2 id="sdk-transport">SDK Transport</h2>

      <table>
        <thead>
          <tr><th>Variable</th><th>Default</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>CODEX_TRANSPORT</code></td><td><code>sdk</code></td><td><code>sdk</code>, <code>auto</code>, or <code>cli</code></td></tr>
          <tr><td><code>COPILOT_TRANSPORT</code></td><td><code>sdk</code></td><td><code>sdk</code>, <code>auto</code>, <code>cli</code>, or <code>url</code></td></tr>
          <tr><td><code>CLAUDE_TRANSPORT</code></td><td><code>sdk</code></td><td><code>sdk</code>, <code>auto</code>, or <code>cli</code></td></tr>
        </tbody>
      </table>

      <h2 id="kanban">Kanban / Task Board</h2>

      <table>
        <thead>
          <tr><th>Variable</th><th>Default</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>KANBAN_BACKEND</code></td><td><code>internal</code></td><td><code>internal</code>, <code>vk</code>, <code>github</code>, or <code>jira</code></td></tr>
          <tr><td><code>KANBAN_SYNC_POLICY</code></td><td><code>internal-primary</code></td><td><code>internal-primary</code> or <code>bidirectional</code></td></tr>
          <tr><td><code>GITHUB_PROJECT_MODE</code></td><td><code>issues</code></td><td><code>issues</code> or <code>kanban</code> (Projects v2)</td></tr>
          <tr><td><code>GITHUB_PROJECT_OWNER</code></td><td>‚Äî</td><td>Org or user for Projects v2</td></tr>
          <tr><td><code>GITHUB_PROJECT_NUMBER</code></td><td>‚Äî</td><td>Project board number</td></tr>
        </tbody>
      </table>

      <h2 id="telegram">Telegram</h2>

      <table>
        <thead>
          <tr><th>Variable</th><th>Default</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>TELEGRAM_BOT_TOKEN</code></td><td>‚Äî</td><td>Bot token from @BotFather</td></tr>
          <tr><td><code>TELEGRAM_CHAT_ID</code></td><td>‚Äî</td><td>Your chat ID (use <code>openfleet-chat-id</code>)</td></tr>
          <tr><td><code>TELEGRAM_INTERVAL_MIN</code></td><td><code>10</code></td><td>Status summary interval in minutes</td></tr>
          <tr><td><code>TELEGRAM_MINIAPP_ENABLED</code></td><td><code>false</code></td><td>Enable Mini App web UI</td></tr>
          <tr><td><code>TELEGRAM_UI_PORT</code></td><td>‚Äî</td><td>HTTP port for Mini App server</td></tr>
        </tbody>
      </table>

      <h2 id="shared-state">Shared State / Coordination</h2>

      <table>
        <thead>
          <tr><th>Variable</th><th>Default</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>SHARED_STATE_ENABLED</code></td><td><code>true</code></td><td>Enable distributed task coordination</td></tr>
          <tr><td><code>SHARED_STATE_HEARTBEAT_INTERVAL_MS</code></td><td><code>60000</code></td><td>Heartbeat renewal interval (1 min)</td></tr>
          <tr><td><code>SHARED_STATE_STALE_THRESHOLD_MS</code></td><td><code>300000</code></td><td>When to consider claims stale (5 min)</td></tr>
          <tr><td><code>SHARED_STATE_MAX_RETRIES</code></td><td><code>3</code></td><td>Max retries before ignoring a task</td></tr>
        </tbody>
      </table>

      <h2 id="replenish">Backlog Replenishment (Experimental)</h2>

      <table>
        <thead>
          <tr><th>Variable</th><th>Default</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>INTERNAL_EXECUTOR_REPLENISH_ENABLED</code></td><td><code>false</code></td><td>Auto-create new tasks when backlog is low</td></tr>
          <tr><td><code>INTERNAL_EXECUTOR_REPLENISH_MIN_NEW_TASKS</code></td><td><code>1</code></td><td>Minimum tasks to generate per cycle</td></tr>
          <tr><td><code>INTERNAL_EXECUTOR_REPLENISH_MAX_NEW_TASKS</code></td><td><code>3</code></td><td>Maximum tasks to generate per cycle</td></tr>
          <tr><td><code>PROJECT_REQUIREMENTS_PROFILE</code></td><td>‚Äî</td><td><code>simple-feature</code>, <code>feature</code>, <code>large-feature</code>, <code>system</code>, <code>multi-system</code></td></tr>
        </tbody>
      </table>

      <h2 id="profiles">Recommended Profiles</h2>

      <h3>Local Development</h3>
      <pre><code>DEVMODE=true
DEVMODE_MONITOR_MONITOR_ENABLED=true
CODEX_TRANSPORT=sdk
COPILOT_TRANSPORT=sdk
CLAUDE_TRANSPORT=sdk</code></pre>

      <h3>Production / End-User</h3>
      <pre><code>DEVMODE=false
DEVMODE_MONITOR_MONITOR_ENABLED=false
CODEX_TRANSPORT=sdk
COPILOT_TRANSPORT=sdk
CLAUDE_TRANSPORT=sdk</code></pre>

      <div class="callout callout--info">
        <span class="callout__icon">‚ÑπÔ∏è</span>
        <p>See <code>.env.example</code> in the repository for the complete list of 900+ documented variables.</p>
      </div>

      <div class="docs-nav-footer">
        <a href="getting-started.html" class="docs-nav-link">
          <div class="docs-nav-link__label">‚Üê Previous</div>
          <div class="docs-nav-link__title">Quick Start</div>
        </a>
        <a href="cli-reference.html" class="docs-nav-link docs-nav-link--next">
          <div class="docs-nav-link__label">Next ‚Üí</div>
          <div class="docs-nav-link__title">CLI Reference</div>
        </a>
      </div>
    </main>
  </div>

  <script src="../js/main.js"></script>
</body>
</html>
